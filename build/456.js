"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[456],{456:(e,n,a)=>{a.r(n),a.d(n,{default:()=>D});var r=a(893),t=a(294),o=a(611),l=a(72),i=a(150),u=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},c=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.data},s=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading};const d={ProfileCard:"x6GB7qsF",header:"GnvSsfIK",editBtn:"zQH1qHFQ",input:"qADOSlp2",loading:"f6hS5AuN",error:"FsXf5Q43",avatarWrapper:"KigwiAbI",editing:"GCdd1OOf"};var f=a(925),v=a(594);var p,h=function(e){var n=e.className,a=e.src,l=e.size,i=e.alt,u=(0,t.useMemo)((function(){return{width:l||160,height:l||160}}),[l]);return(0,r.jsx)("img",{src:a,alt:i,style:u,className:(0,o.A)("ZqPdwJxd",{},[n])})};!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(p||(p={}));var y,m=function(){return m=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},m.apply(this,arguments)},g=(0,t.memo)((function(e){var n=e.className,a=e.label,l=e.options,i=e.value,u=e.onChange,c=e.readOnly,s=(0,t.useMemo)((function(){return null==l?void 0:l.map((function(e){return(0,r.jsx)("option",m({className:"JkXz98qY",value:e.value},{children:e.content}),e.value)}))}),[l]);return(0,r.jsxs)("div",m({className:(0,o.A)("cidfdn6H",{},[n])},{children:[a&&(0,r.jsx)("span",m({className:"G1uuf7Bp"},{children:"".concat(a," >")})),(0,r.jsx)("select",m({className:"VOKOuKGo",value:i,onChange:function(e){u&&u(e.target.value)},disabled:c},{children:s}))]}))})),b=[{value:p.RUB,content:p.RUB},{value:p.USD,content:p.USD},{value:p.EUR,content:p.EUR}],x=(0,t.memo)((function(e){e.className;var n=e.value,a=e.onChange,o=e.readOnly,i=(0,l.$G)().t,u=(0,t.useCallback)((function(e){null==a||a(e)}),[a]);return(0,r.jsx)(g,{label:i("Укажите валюту"),options:b,value:n,onChange:u,readOnly:o})}));!function(e){e.Russia="Russia",e.Belarus="Belarus",e.Ukraine="Ukraine",e.Kazahstan="Kazahstan",e.Armenia="Armenia"}(y||(y={}));var j=[{value:y.Russia,content:y.Russia},{value:y.Belarus,content:y.Belarus},{value:y.Kazahstan,content:y.Kazahstan}],O=(0,t.memo)((function(e){e.className;var n=e.value,a=e.onChange,o=e.readOnly,i=(0,l.$G)().t,u=(0,t.useCallback)((function(e){null==a||a(e)}),[a]);return(0,r.jsx)(g,{label:i("Укажите страну"),options:j,value:n,onChange:u,readOnly:o})})),C=function(){return C=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},C.apply(this,arguments)},N=function(e){var n,a,t=e.className,i=e.data,u=e.isLoading,c=e.readOnly,s=(e.error,e.onChangeFirstname),p=e.onChangeLastname,y=e.onChangeCity,m=e.onChangeAge,g=e.onChangeUsername,b=e.onChangeAvatar,j=e.onChangeCurrency,N=e.onChangeCountry,w=(0,l.$G)().t;u&&(0,r.jsx)("div",C({className:(0,o.A)(d.ProfileCard,(n={},n[d.loading]=!0,n),[t])},{children:(0,r.jsx)(v.Z,{})}));var P=((a={})[d.editing]=!c,a);return(0,r.jsx)("div",C({className:(0,o.A)(d.ProfileCard,P,[t])},{children:(0,r.jsxs)("div",C({className:d.data},{children:[(null==i?void 0:i.avatar)&&(0,r.jsx)("div",C({className:d.avatarWrapper},{children:(0,r.jsx)(h,{src:null==i?void 0:i.avatar})})),(0,r.jsx)(f.I,{value:null==i?void 0:i.avatar,placeholder:w("Введите ссылку на аватар"),className:d.input,onChange:b,readOnly:c}),(0,r.jsx)(f.I,{value:null==i?void 0:i.username,placeholder:w("Введите имя аккаунта"),className:d.input,onChange:g,readOnly:c}),(0,r.jsx)(f.I,{value:null==i?void 0:i.first,placeholder:w("Ваше имя"),className:d.input,onChange:s,readOnly:c}),(0,r.jsx)(f.I,{value:null==i?void 0:i.lastname,placeholder:w("Ваша фамилия"),className:d.input,onChange:p,readOnly:c}),(0,r.jsx)(f.I,{value:null==i?void 0:i.dateOfBirth,type:"date",min:"1900-01-01",max:"2100-12-31",placeholder:w("Дата рождения"),className:d.input,onChange:m,readOnly:c}),(0,r.jsx)(f.I,{value:null==i?void 0:i.city,placeholder:w("Ваша город"),className:d.input,onChange:y,readOnly:c}),(0,r.jsx)(x,{className:d.input,value:null==i?void 0:i.currency,onChange:j,readOnly:c}),(0,r.jsx)(O,{className:d.input,value:null==i?void 0:i.country,onChange:N,readOnly:c})]}))}))},w=a(168),P=(0,w.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(t){switch(t.label){case 0:e=n.extra,a=n.rejectWithValue,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.api.get("profile")];case 2:return[2,t.sent().data];case 3:return r=t.sent(),console.log(r),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{u(o.next(e))}catch(e){n(e)}}function i(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}u((o=o.apply(a,r||[])).next())}));var a,r,t,o})),k=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},R=(0,w.hg)("profile/updateProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(l){switch(l.label){case 0:e=n.extra,a=n.rejectWithValue,r=n.getState,t=k(r()),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.api.put("/profile",t)];case 2:return[2,l.sent().data];case 3:return o=l.sent(),console.log(o),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{u(o.next(e))}catch(e){n(e)}}function i(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}u((o=o.apply(a,r||[])).next())}));var a,r,t,o})),U=a(310),A=U.Ry({first:U.Z_().matches(/^[a-zA-Z]+$/).required("Заполните поле Имя корректно"),lastname:U.Z_().required("Заполните поле Фамилия корректно"),dateOfBirth:U.hT().required("Заполните поле Дата рождения корректно"),currency:U.Z_().required("Заполните поле Валюта корректно").oneOf(Object.keys(p)),country:U.Z_().required("Заполните поле Страна корректно").oneOf(Object.keys(y)),city:U.Z_().required("Заполните поле Город корректно"),username:U.Z_().required("Заполните поле Имя пользователя корректно"),avatar:U.Z_().url()}),L=function(){return L=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},L.apply(this,arguments)},E=(0,w.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadOnly:function(e,n){e.readonly=n.payload},updateProfile:function(e,n){e.form=L(L({},e.form),n.payload)},cancelEdit:function(e){e.readonly=!0,e.form=e.data}},extraReducers:function(e){e.addCase(P.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(P.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(P.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(R.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(R.fulfilled,(function(e,n){try{A.validateSync(n.payload),e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0}catch(n){"ValidationError"==n.name&&(e.error=n.message,e.readonly=!1)}})).addCase(R.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),B=E.actions,S=E.reducer,I=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},G=a(461),q=a(998);const F={ProfilePageHeader:"FPJSgL1_",editBtn:"vP5lJqeW",error:"QuAsdTwr"};var T=a(809),z=a(161),_=function(){return _=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},_.apply(this,arguments)},Z=function(e){var n=(0,l.$G)().t,a=e.className,i=(0,q.v9)(I),s=((0,q.v9)(c),(0,q.v9)(u)),d=(0,G.T)(),f=(0,t.useCallback)((function(){d(B.setReadOnly(!1))}),[d]),v=(0,t.useCallback)((function(){d(B.cancelEdit())}),[d]);return(0,r.jsxs)("div",_({className:(0,o.A)(F.ProfilePageHeader,{},[a])},{children:[(0,r.jsx)(T.xv,{title:n("Профиль")}),i?(0,r.jsx)(z.zx,_({className:F.editBtn,theme:z.UH.OUTLINE,onClick:f},{children:n("Редактировать")})):(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(T.xv,{className:F.error,title:n("Неправильно заполнена форма !"),text:s}),(0,r.jsx)(z.zx,_({className:F.editBtn,theme:z.UH.OUTLINE,onClick:v},{children:n("Отменить")})),(0,r.jsx)(z.zx,_({className:F.saveBtn,theme:z.UH.OUTLINE,onClick:function(){d(R())}},{children:n("Сохранить")}))]})]}))},H=function(){return H=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},H.apply(this,arguments)},K={profile:S};const D=function(e){var n=e.className,a=((0,l.$G)().t,(0,G.T)()),c=(0,q.v9)(k),d=(0,q.v9)(s),f=(0,q.v9)(u),v=(0,q.v9)(I);(0,t.useEffect)((function(){a(P())}),[a]);var p=(0,t.useCallback)((function(e){a(B.updateProfile({first:e||""}))}),[a]),h=(0,t.useCallback)((function(e){a(B.updateProfile({lastname:e||""}))}),[a]),y=(0,t.useCallback)((function(e){a(B.updateProfile({dateOfBirth:(null==e?void 0:e.toString())||""}))}),[a]),m=(0,t.useCallback)((function(e){a(B.updateProfile({city:e||""}))}),[a]),g=(0,t.useCallback)((function(e){a(B.updateProfile({username:e||""}))}),[a]),b=(0,t.useCallback)((function(e){a(B.updateProfile({avatar:e||""}))}),[a]),x=(0,t.useCallback)((function(e){a(B.updateProfile({currency:e}))}),[a]),j=(0,t.useCallback)((function(e){a(B.updateProfile({country:e}))}),[a]);return(0,r.jsx)(i.W,H({reducers:K,removeAfterUnmount:!0},{children:(0,r.jsxs)("div",H({className:(0,o.A)("",{},[n])},{children:[(0,r.jsx)(Z,{}),(0,r.jsx)(N,{data:c,isLoading:d,error:f,readOnly:v,onChangeFirstname:p,onChangeLastname:h,onChangeAge:y,onChangeCity:m,onChangeUsername:g,onChangeAvatar:b,onChangeCurrency:x,onChangeCountry:j})]}))}))}},150:(e,n,a)=>{a.d(n,{W:()=>l});var r=a(893),t=a(998),o=a(294),l=function(e){var n=e.reducers,a=e.children,l=e.removeAfterUnmount,i=(0,t.oR)();return(0,t.I0)(),(0,o.useEffect)((function(){return Object.entries(n).forEach((function(e){var n=e[0],a=e[1];i.reducerManager.add(n,a)})),function(){l&&Object.entries(n).forEach((function(e){var n=e[0];e[1],i.reducerManager.remove(n)}))}}),[]),(0,r.jsx)(r.Fragment,{children:a})}},925:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(893),t=a(294),o=a(611);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,t.memo)((function(e){var n=(0,t.useRef)(null),a=(0,t.useState)(!1),i=a[0],u=a[1],c=e.className,s=e.value,d=e.onChange,f=e.type,v=void 0===f?"text":f,p=e.placeholder,h=e.autofocus,y=e.readOnly,m=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readOnly"]),g=(0,t.useState)(0),b=g[0],x=g[1],j=i&&!y;return(0,t.useEffect)((function(){var e;h&&(u(!0),null===(e=n.current)||void 0===e||e.focus())}),[h]),{}.OUhGaO2x=y,(0,r.jsxs)("div",l({className:(0,o.A)("LuFDUWoP",{},[c])},{children:[p&&(0,r.jsx)("div",l({className:"emAQQ85i"},{children:"".concat(p," >")})),(0,r.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",l({ref:n,type:v,value:s,onChange:function(e){null==d||d(e.target.value),x(e.target.value.length)},className:"LVdIPwcx",onBlur:function(){u(!1)},onFocus:function(){u(!0)},onSelect:function(e){var n;x((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:y},m)),j&&(0,r.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(6*b,"px")}})]}))]}))}))},809:(e,n,a)=>{a.d(n,{xv:()=>s,lg:()=>l});var r=a(893),t=a(611);const o={text:"uNJeeCm1",error:"F9oLXAK4",title:"ikI7VPeL",left:"dBqPIG8f",right:"j4UBrvei",center:"iJw6m2iu"};var l,i,u=a(294),c=function(){return c=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},c.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(l||(l={})),function(e){e.RIGHT="right",e.LEFT="left",e.CENTER="center"}(i||(i={}));var s=(0,u.memo)((function(e){var n,a=e.className,u=e.title,s=e.text,d=e.theme,f=void 0===d?l.PRIMARY:d,v=e.align,p=void 0===v?i.LEFT:v,h=((n={})[o[f]]=!0,n[o[p]]=!0,n);return(0,r.jsxs)("div",c({className:(0,t.A)(o.Text,h,[a])},{children:[u&&(0,r.jsx)("p",c({className:o.title},{children:u})),s&&(0,r.jsx)("p",c({className:o.text},{children:s}))]}))}))},461:(e,n,a)=>{a.d(n,{T:()=>t});var r=a(998),t=function(){return(0,r.I0)()}}}]);